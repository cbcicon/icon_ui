

<div class="d-flex justify-content-between m-2">
	<h5> Demand Management</h5>
	<button type="button" class="btn btn-light" (click)="handleInfoCard()" ><i class="bi bi-graph-up-arrow"></i> Demand KPI's</button>

</div>

<!-- cards on above to dashboard -->

<div class="grid mb-3"  *ngIf="showInfoCard"  >	

<div class="col-12 lg:col-6 xl:col-3">
            <div class="card mb-0">
                <div class="flex justify-content-between mb-3">
                    <div>
                        <span class="block text-500 font-medium mb-3">Orders</span>
                        <div class="text-900 font-medium text-xl">152</div>
                    </div>
                    <div class="flex align-items-center justify-content-center  border-round" [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                        <i class="pi pi-shopping-cart"></i>
                    </div>
                </div>
                <span class="text-green-500 font-medium">24 new </span>
                <span class="text-500">since last visit</span>
            </div>
</div>
<div class="col-12 lg:col-6 xl:col-3">
	<div class="card mb-0">
		<div class="flex justify-content-between mb-3">
			<div>
				<span class="block text-500 font-medium mb-3">Orders</span>
				<div class="text-900 font-medium text-xl">152</div>
			</div>
			<div class="flex align-items-center justify-content-center  border-round" [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
				<i class="pi pi-shopping-cart"></i>
			</div>
		</div>
		<span class="text-green-500 font-medium">24 new </span>
		<span class="text-500">since last visit</span>
	</div>
</div>
<div class="col-12 lg:col-6 xl:col-3">
	<div class="card mb-0">
		<div class="flex justify-content-between mb-3">
			<div>
				<span class="block text-500 font-medium mb-3">Orders</span>
				<div class="text-900 font-medium text-xl">152</div>
			</div>
			<div class="flex align-items-center justify-content-center  border-round" [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
				<i class="pi pi-shopping-cart"></i>
			</div>
		</div>
		<span class="text-green-500 font-medium">24 new </span>
		<span class="text-500">since last visit</span>
	</div>
</div>
<div class="col-12 lg:col-6 xl:col-3">
	<div class="card mb-0">
		<div class="flex justify-content-between mb-3">
			<div>
				<span class="block text-500 font-medium mb-3">Orders</span>
				<div class="text-900 font-medium text-xl">152</div>
			</div>
			<div class="flex align-items-center justify-content-center  border-round" [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
				<i class="pi pi-shopping-cart"></i>
			</div>
		</div>
		<span class="text-green-500 font-medium">24 new </span>
		<span class="text-500">since last visit</span>
	</div>
</div>

</div>

<!-- demand management table -->

<div *ngIf="!showItemDetailPage" class="card">
	<p-table [value]="customers" dataKey="id" [tableStyle]="{ 'min-width': '75rem' }" [selection]="selectedCustomers"
		(selectionChange)="onSelectionChange($event)" [selectAll]="selectAll"
		(selectAllChange)="onSelectAllChange($event)" [paginator]="true" [rows]="10" [totalRecords]="totalRecords"
		[loading]="loading" loadingIcon="pi pi-spin pi-spinner" [showCurrentPageReport]="true"
		currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
		[rowsPerPageOptions]="rowsPerPageOptions" #dt1
		styleClass="p-datatable-gridlines p-datatable-striped">
		<ng-template pTemplate="caption">
			<div class="flex">
				<h5><i class="pi pi-exclamation-circle mr-2" ></i>Items List</h5>
				<span class="p-input-icon-left ml-auto">
					<p-button label="Export" [text]="true" icon="pi pi-download" [plain]="true"></p-button>
					<p-dropdown [options]="duration" optionLabel="name" [(ngModel)]="selectedDuration"></p-dropdown>&nbsp;
					<p-multiSelect [style]="{'width':'170px;'}" [panelStyle]="{'width':'170px'}" [options]="colunms"
						optionLabel="name" placeholder="Column Options"></p-multiSelect>
				</span>
			</div>
		</ng-template>

			<ng-template pTemplate="header">
				<tr>
					<th style="width: 6rem"></th>
					<ng-container *ngFor="let headerItem of tableHeaderItem">
						<th pSortableColumn="{{ headerItem.sortableColumn }}">{{ headerItem.columnName }}</th>
					  </ng-container>
				</tr>
				<tr>
					<th>
						<p-tableHeaderCheckbox></p-tableHeaderCheckbox>
					</th>
						<th>
							<input pInputText type="text" 
							(input)="dt1.filter($any($event.target).value, 'item', 'contains')"
							 [value]="$any(dt1.filters['item'])?.value"
							placeholder="Item" 
							class="w-full"
							>
						</th>
						<th>
							<input pInputText type="text" 
							(input)="dt1.filter($any($event.target).value, 'description', 'contains')"
							[value]="$any(dt1.filters['description'])?.value"
							placeholder="Description"
							 class="w-full"
							 >
						</th>
						<th>
							<input pInputText type="text" 
							(input)="dt1.filter($any($event.target).value, 'demand', 'contains')"
							[value]="$any(dt1.filters['demand'])?.value"
							placeholder="Demand" 
							class="w-full">
						</th>
						<th>
							<input pInputText type="text" 
							(input)="dt1.filter($any($event.target).value, 'on_stock', 'contains')"
							[value]="$any(dt1.filters['on_stock'])?.value"
							 placeholder="On Stock" 
							 class="w-full">
						</th>
						<th>
							<input pInputText type="text" 
							(input)="dt1.filter($any($event.target).value, 'availability', 'contains')"
							[value]="$any(dt1.filters['availability'])?.value"
							 placeholder="Availability" 
							 class="w-full">
						</th>
						<th>
							<input pInputText type="text" 
							(input)="dt1.filter($any($event.target).value, 'open_po', 'contains')"
							[value]="$any(dt1.filters['open_po'])?.value"
							 placeholder="Open Po" 
							 class="w-full">
						</th>
						
						<th>
							
							<span class="p-input-icon-right">
								<i class="pi pi-calendar"></i>
								<input pInputText type="text" 
								(input)="dt1.filter($any($event.target).value, 'due_date', 'contains')"
								[value]="$any(dt1.filters['due_date'])?.value"
								placeholder="Due Date" 
								class="w-full">
							</span>

						</th>
						
						 <th>
							<input pInputText type="text" 
							(input)="dt1.filter($any($event.target).value, 'item_type', 'contains')"
							[value]="$any(dt1.filters['item_type'])?.value"
							placeholder="Item Type" 
							class="w-full">
						</th>
				</tr>				
 
		</ng-template>

			<ng-template pTemplate="body" let-customer>
				<tr>
					<td>
						<p-tableCheckbox [value]="customer"></p-tableCheckbox>
					</td>
					<td > <i class="bi bi-search" (click)="showItemSearch()" ></i>  <p style="color: green;" (click)="goToItemDetailsPage()"> {{ customer.item }} </p> </td>
					<td>  <p>{{ customer.description }} </p></td>
					<td>{{ customer['demand'] }}</td>
					<td [style.color]="customer['on_stock'] === 'Out of Stock' || customer['availability'] === 'Out of Stock' ? 'red' : 'green'">
						<i class="bi bi-box-arrow-in-up-right" (click)="show()"></i> {{ customer['on_stock'] }}
					</td>
					
					<td [ngClass]="{'text-danger': customer.availability === 'Out of Stock'}" (click)="rightSideBar = customer.availability !== 'Out of Stock'">
						<i *ngIf="customer.availability === 'Out of Stock'" class="bi bi-unlock"></i>
						<i *ngIf="customer.availability !== 'Out of Stock'"class="bi bi-lock"></i>
						{{ customer.availability }}
					  </td>
					  
					<td>{{ customer['due_date'] }}</td>
					<td *ngIf="customer['open_po'] === 'No Open PO'"  style="color: red;">{{ customer['open_po'] }}</td>
					<td *ngIf="customer['open_po'] !== 'No Open PO'" > {{ customer['open_po'] }}</td>
					<!-- {{customer['item_type']}} -->
					<td>
						<div class="item-type-icons">
						 <div class="item-type-cheap"> <i class="bi bi-exclamation-triangle"  ></i>
					 </div> <div class="item-type-cheap"> <i class="bi bi-thermometer-snow"></i> </div>
					 <div class="item-type-cheap"> <i class="bi bi-hourglass"></i> </div>
					 <div class="item-type-cheap"> <i class="bi bi-box-seam"></i> </div>
					</div>
					 </td> 

					<!-- <td>{{ customer['quantity-open'] }}</td>
					<td>{{ customer.vendor }}</td> -->

			</tr>
		</ng-template>

	</p-table>
</div>


<!-- order detail page navigation  -->

<div *ngIf="showItemDetailPage" class="card" >
	<p-button label="Back" [text]="true" [raised]="true" [plain]="true" (onClick)="backToMainPage()"></p-button>
	<h4> Work in Progress.. </h4>
</div>


<!-- right sidebar  -->

<div class="item-detail-right-sidebar" >
<p-sidebar [(visible)]="rightSideBar" position="right" styleClass="p-sidebar-lg" >
	<ng-template pTemplate="headless"> 
	<div class="flex justify-content-between">
	<div>
	<span class="sidebar-header">Ring Fence</span>
	<p class="sidebar-header-id">ID: 01-213-100-Z</p>
    </div>
	<span>
		<p-button icon="pi pi-times" [rounded]="true" [text]="true" severity="secondary " (click)="closeCallback($event)"></p-button>
	</span>
</div>


<div class="container">
	<div class="flex justify-content-between">
	<div>
		<span class="item-detail-box-header">Item Details</span>
		<p>Kit Box Small 9x5x2.5 (with Sealing Strip)</p>
	</div>	
	<button (click)="toggleContent()" class="toggle-button">
	  <i class="pi" [ngClass]="{'pi-chevron-down': !showContent, 'pi-chevron-up': showContent}"></i>
	</button>
    </div>
	<div class="content" *ngIf="showContent">
	<div class="row"> 
	 <div class="col-3"> <p class="text-center"> 4</p> </div>
	 <div class="col-3"> <p class="text-center"> 4</p> </div>
	 <div class="col-3"> <p class="text-center"> 4</p> </div>
	 <div class="col-3"> <p class="text-center"> 4</p> </div>
	</div>
	
	<div class="row"> 
		<div class="col-3"> <p class="text-center"> 4</p> </div>
		<div class="col-3"> <p class="text-center"> 4</p> </div>
		<div class="col-3"> <p class="text-center"> 4</p> </div>
		<div class="col-3"> <p class="text-center"> 4</p> </div>
	</div>
	<div class="row"> 
		<div class="col-3"> <p class="text-center"> 4</p> </div>
		<div class="col-3"> <p class="text-center"> 4</p> </div>
		<div class="col-3"> <p class="text-center"> 4</p> </div>
		<div class="col-3"> <p class="text-center"> 4</p> </div>
	</div>
	<div class="mt-3">
		<span> <b>Sponsor Details</b></span>
		<p>Mitsubishi Tanabe Pharma</p>
	</div>
	
	</div>

	<div class="report-card">
		<p-chart type="pie" [data]="data" [options]="options"  class="chart-container"></p-chart>
	</div>

	<div class="card">

		<p-table [value]="itemData" [tableStyle]="{ 'min-width': '50rem' }">
		  <ng-template pTemplate="header">
			<tr>
			  <th>Code</th>
			  <th>Name</th>
			  <th>Category</th>
			</tr>
		  </ng-template>
		  <ng-template pTemplate="body" let-itemData>
			<tr>
			  <td>{{ itemData.code }}</td>
			  <td>{{ itemData.name }}</td>
			  <td>{{ itemData.category }}</td>
			</tr>
		  </ng-template>
		</p-table>
	  </div>
  </div>

</ng-template>  
</p-sidebar>

  
</div>

