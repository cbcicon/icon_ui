<div class="card stock-and-scrap-card"  >

  <h4 class="text-start"> Stock & Scrap </h4>

  <p-divider></p-divider>
    <div class="d-flex align-items-start">
      <app-block-tag [blockTagStyle]="'blockTagStyle'" [blockData]="{label:'Total Ring Fenced ' , qtyNum:'15000'}" ></app-block-tag>
      <app-block-tag [blockTagStyle]="'blockTagStyle'" [blockData]="{label:'Total Replacement Excess Stock' , qtyNum:'18000'}" ></app-block-tag>
      <app-block-tag [blockTagStyle]="'blockTagStyleDanger'" [blockData]="{label:'Scrap Volume' , qtyNum:'11'}" ></app-block-tag>
      <app-block-tag [blockTagStyle]="'blockTagStyleDanger'" [blockData]="{label:'Scrap Volume' , qtyNum:'1100'}" ></app-block-tag>

    </div>

    <p-divider class="solid"></p-divider>

  <pre>{{stockAndScrap|json}}</pre>

    <p-table 
    [value]="stockAndScrap"
    sortField="location" 
    sortMode="single" 
    [scrollable]="true" 
    scrollHeight="400px" 
    rowGroupMode="subheader" 
    groupRowsBy="location" 
    [tableStyle]="{'min-width': '60rem'}">
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="action-item" rowspan="2">
            <div class="flex justify-content-between align-items-center">
              Location
            </div>
          </th>

  
          <th pSortableColumn="ITEM_NAME"  rowspan="2">
            <div class="flex justify-content-between align-items-center">
              Lot No. 
            </div>
          </th>
          <th pSortableColumn="ITEM_DESCRIPTION"  rowspan="2">
            <div class="flex justify-content-between align-items-center">
              Total Qty
            </div>
          </th>
  
          <th pSortableColumn="DEMAND"  rowspan="2">
          fas
          </th>
  
          <th pSortableColumn="ON_STOCK" colspan="3">
            <div class="text-center">
              Expiry
            </div>
          </th>
  
          <th pSortableColumn="AVAILABILITY"  rowspan="2">
            <div class="flex justify-content-between align-items-center">
              Max
              
            </div>
          </th>

          <th pSortableColumn="AVAILABILITY"  rowspan="2">
            <div class="flex justify-content-between align-items-center">
              Re-Order Date
              
            </div>
          </th>
  
        </tr>

        <tr>
         
          <th class="text-center">Category</th>
          <th class="text-center">Days</th>
          
          <th class="text-center">Date</th>
        
        </tr>
      </ng-template>
       
      <ng-template pTemplate="groupfooter" let-stockAndScrap>
        <tr>
          <td class="text-right font-bold pr-6"> Total</td>
          <td colspan="2" class="text-right font-bold pr-6">
           {{calculateTotal(stockAndScrap.location)}}
          </td>
        </tr>
      </ng-template>
  
      <ng-template pTemplate="body" let-stockAndScrap  let-rowIndex="rowIndex">
        <tr>
          <td >{{ stockAndScrap.location }}</td>  
          <td >{{stockAndScrap.lotNo  }}</td>
          <td>{{stockAndScrap.totalQty}}</td>
           <td>{{stockAndScrap.expiryCategory}}</td>
           <td>{{stockAndScrap.expiryDays}}</td>
           <td>{{stockAndScrap.expiryDate}}</td>
           <td>{{stockAndScrap.min}}</td>
           <td>{{stockAndScrap.max}}</td>
           <td>{{stockAndScrap.reOrderDate}}</td>
          
        </tr>
      </ng-template>
  </p-table>



  </div>